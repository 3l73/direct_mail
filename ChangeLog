2006-04-12 Jan-Erik Revsbech <jer@moccompany.com>
	* Update dmailer.phpcrom and returnmail.phpsh changed require('XXX') to require_once(t3lib_extMgm::extPath('direct_mail')'mod/XXX').

2006-04-12 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Fix getMimeType method until it is fixed in the core. See bugtracker issue 3172.
	* Update change log in the manual.
	* Fix to change to enableFields that caused problem in conversion function.

2006-04-11 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Systematic review of enableFields and deleteClause in mod_web_dmail. Use BEfunc instead of pageSelect method.
	* Recover extension constraints in ext_emconf.php.

2006-04-07 Jan-Erik Revsbech <jer@moccompany.com>
	* Fix Option includeMedia was not used when fetching direct mail. All mails were sent using absolute links.
	
2006-04-07 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Correction to plain text links statistics.

2006-04-06 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Add missing label localization in dmailer log.
	* Statistics: group links, so that identical links of html and text mails are listed on the same line. Thanks to Martin Kutschker.
	* Statistics: parse the links, so that for internal urls page title and path (tooltip) are shown. Thanks to Martin Kutschker.
	* Allow tab as option for CSV-import field separator. See bugtracker issue 3139.

2006-04-04 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* dmailer should not remove comments when inside script and style tags.

2006-03-24 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Use $_SERVER['PHP_SELF'] when available in dmailerd.phpcron and returnmail.phpsh
	* Fix bugtracker issue 2982: do not send emails without any content.
	* Correction to two incorrect characters in locallang_csh_web_txdirectmailM1.xml
	* Allow $TYPO3_CONF_VARS['EXTCONF'][$_EXTKEY]['addRecipFields'] to extend the list of fields that may be imported.

2006-03-23 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* On behalf of Ralf Hettinger: three new functions importRecords_checkMail, importRecords_checkImportDublettes and importRecords_makeName for more filtering of the imported CSV values.

2006-03-19 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Fix bugtracker issue 2924.
	* Fix bugtracker issue 2925.
	* Make direct_mail conflict with plugin_mgm.
	* Remove reference to t3lib_extMgm::extPath('direct_mail') in ext_update.php. Fix issue 2920.
	* Do not allow database update before the extension is installed (TCA not yet initialised). Fix issue 2920.
	* Remove reference to t3lib_extMgm::extPath('direct_mail') in require_once in class.mod_wed_dmail.php.
	* Fix issue 2895.

2006-03-16 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Fix bugtracker issue 2821.
	* Eliminate use of deprecated $TYPO3_DB->sql($db,$query) to ensure dbal compliance.

2006-03-15 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Systematic review and adjustment of all SQL queries to ensure compatibility with dbal system extension.

2006-03-10 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Correction to typo error in locallang_mod_web_txdirectmailM1.xml

2006-03-07 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Honor return path and defer mode settings in dmailer_sendSimple.
	* Do not display the statistics option for direct mails that where sent to a list of addresses (they are not available).
	* In the Direct Mails function, do not display direct mails that were already sent.
	* In list of pages not yet direct mails, do not display pages that are hidden or with restricted-access (they cannot be fetched).
	* Update to module context sensitive help and manual.
	* Correction to XCLASS declaration in res/scripts/class.tx_directmail_ttnews_plaintext.php
	* Update to ext_emconf.php

2006-03-06 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Remove unknown field "description" from the list $this->fieldlist in class.mod_web_dmail.php
	* Various changes to the user interface.
	* Completed manual.
	* Update module context sensitive help.

2006-03-05 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Minor adjustments to tables csh files.
	* Complete csh help in English and French for sys_dmail_category table.
	* Update section of manual: Categorizing newsletter content.
	* Rename and reorganize module locallang files in mod directory.
	* Add module csh file locallang_csh_web_txdirectmailM1.xml
	* Initialize module csh file and test configuration with a few labels.
	* Add item 'dmail' on column 'module' of table 'pages' in ext_tables.php (pending removal from typo3/sysext/cms/ext_tables.php)
	* Add methods find_MIDfromReturnPath and find_XTypo3MID in mod/class.readmail.php (pending removal from t3lib/class.t3lib_readmail.php)
	* Update to manual and contextual help.
	* Add simulated conversion of records, until conversion is explicitly confirmed.
	* Stop reporting each converted record after the 50th converted record in a table.
	* Stop reporting each not-converted record after the 50th not-converted record in a table.

2006-03-04 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Add copy of the static templates in the manual.
	* Change English language labels of Direct Mail Group to Recipient list.
	* Adjust a few more TCA labels.
	* Update recipient list section of manual.
	* Complete csh help in English and French for sys_dmail_group table.

2006-03-03 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Update to the manual.

2006-03-01 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Add dependency on TYPO3 4.0.0 in ext_emconf.php.
	* Update the Configuration section of the manual, including conversion.
	* Change the module form from "mediumDoc" to "template".

2006-02-28 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Update structure of manual.
	* Delete locallang.php files.
	* Clean up mailSelect class
	* Make special query mail group basically work.

2006-02-27 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Correct return address from backend form to directMail defaultView; in some cases was creating a new record based on same page!
	* Add flowedFormat option for plain text content (Page TSConfig in BE and TS setup of plain text rendering plugin).
	* Eliminate references to $HTTP_POST_VARS in mod_web_dmail class.
	* Disable categories assignment fields on backend forms by default. Need to be added through Page TsConfig.
	* Update manual section: "Configuring the use of categories".
	* Light cleanup on boundaries.
	* Convert locallang files to xml format.

2006-02-26 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Add class.tx_directmail_ttnews_plaintext.php in res/scripts: hook on tt_news to render tt_news records in plain text.
	* Add static template tt_news_plaintext: "Direct Mail News Plain Text" to configure rendering of News in plain text.
	* Corrections and adjustments to plain text rendering plugin class.
	* Further minor cosmetic changes in class mod_web_dmail.

2006-02-24 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Move attach.gif and mail.gif from mod to res/gfx directory.
	* Move icon_tx_directmail_category.gif from extension root to res/gfx directory.
	* Import newmail.gif from t3lib/gfx into res/gfx
	* Import dmail.gif, dmail_list.gif, modules_dmail.gif, modules_dmail__h.gif into res/gfx
	* Use t3lib_iconWorks for all icons.
	* Small cosmetic changes im class mod_web_dmail.
	
2006-02-23 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Remove enablePlain and enableHTML configuration properties. Rely on sendOptions and submitted url's.
	* Correct query of pages not yet direct mails in Direct mails function.
	* Completed French translation.

2006-02-22 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Update to csh files.
	* Reverting change to jumpUrl after correction of bugtracker issue 2592 in TYPO3core.
	* Update to manual (incomplete).
	* Remove help function.
	* Add priority as module configuration property.
	* Correcting accidental removal of HTMLParams column in TCA.
	* Localization of module completed.

2006-02-21 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Path setting corrections in dmailerd.phpcron and returnmail.phpsh
	* Correct jumpUrl hook so that it will work even if $TYPO3_CONF_VARS['SYS']['doNotCheckReferer'] is not set.
	* Add includeMedia option on direct mails. If not set, images and other media are not included in the HTML content (cid:); instead only absolute href's are included in the html code.
	* Add file locallang_csh_sysdmailcat.php and small updates to other csh files.
	
2006-02-18 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Add class.ext_update.php: access the Categories conversion function from the EM dropdown menu.
	* Add explanation for non-converted records in the output of the conversion.
	* Correction to TCA: add 'l10n_mode' => 'exclude' on tt_content column module_sys_dmail_category.

2006-02-17 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Change mm relations renderMode to chekbox so that localization works.
	* Enable table fe_groups in dmail groups of type "From pages".
	* Add conversion of mm-relation to categories in sys_dmail_group (column select_categories).

2006-02-16 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Delete file static/setup.txt
	* Localize categories in forms presented by class.mod_web_dmail.php
	* Establish mm relations only with parent category records
	* Localize right-hand side of categories select on tt_content form.
	
2006-02-16 Jan-Erik Revsbech <jer@moccompany.com>
	* Add localization of categories.

2006-02-15 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Restructure ext_tables.php and tca.php files

2006-02-14 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Small correction to TCA (old_cat_number)
	* Add scripts and gfx subdirectories in res directory.
	* Move class.tx_directmail_container.php and class.tx_directmail_checkjumpurl.php to res/scripts directory
	* Change tx_directmail_checkjumpurl hook configuration in ext_localconf
	* Add boundaries subdirectory to static directory.
	* Move current setup.text to static/boundaries directory
	* Modify static/boundaries/setup.txt to refer to new location of class.tx_directmail_container.php
	* Change configuration of "Direct Mail Content Boundaries" static template in ext_tables.php
	* Add dmailerping.gif to res/gfx directory.
	* Add plaint text plugin will localized labels in directory pi1.
	* Add static template "Direct Mail Plain Text" in directory static/plaintext.
	* Add configuration of "Direct Mail Plain Text" static template in ext_tables.php
	* Modify boundaries static template to add support for plaintext plugin.

2006-02-13 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Correction to class.tx_directmail_checkjumpurl.php and class.dmailer.php: missing global
	* Modifying grouping of module configuration options.
	* Fix RDCT usability issue by adding selection list of domains.
	* Add use_domain in sys_dmail table and module configuration options.
	* Fix bugtracker issue 253.
	* Make sure long_link_rdct_url is consistent with use_domain when the mail is compiled.
	* Correct small glitches.

2006-02-11 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Change version number to 2.0.0 so that we can refer to it easily in the manual.
	* Change state to Stable.
	* Add conflicts with sr_direct_mail_ext, it_dmail_fix
	* Modify function makeCategories.
	* Complete conversion function, including localization.

2006-02-10 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Correction to returnmail.phpsh
	* Restructure class.readmail.php

2006-02-09 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Correction to foreign_table_where clauses in categories mm tables
	* Add class class.tx_directmail_checkjumpurl.php in res directory to implement hook on tslib_fe/checkDataSubmisssion.
	* Configure hook on tslib_fe/checkDataSubmisssion in ext_localconf.php (requires modified tslib_fe and index_ts from TYPO3core CVS).
	* Fix bugtracker issue 670: add aC to the jumpUrl prefix and forward it to the jumped-to URL so that the account cannot be hijacked.
	* Set $TYPO3_CONF_VARS['EXTCONF']['direct_mail']['defaultRecipFields'] in ext_localconf.php.
	* Correction: set some defaults in the Module configuration form.
	* Localize labels in function cmd_displayUserInfo.
	* Restrict displayed categories to those specified by Page TSConfig in cmd_displayPageInfo and cmd_displayUserInfo
	
2006-02-09  Thorsten Kahler  <thorsten.kahler@dkd.de>
	* fixed 2 small typos in mod_web_dmail::cmd_conf()

2006-02-09 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Add exclude=1 on all columns of sys_dmail table in TCA.
	* Add column authcode_fieldList to table sys_dmail.
	* Add authcode_fieldList to configuration parameters.
	* Modify authCode computation in dmailer class (requires modified stdAuthCode in t3lib_div from TYPO3core CVS)
	* Remove columns issent and rendersize from all sys_dmail types in TCA.
	* Modify TCA definition of module_sys_dmail_category fields to use PAGE_TSCONFIG_IDLIST to restrict selectable categories
	* Add module_sys_dmail_category to all types in tt_content TCA.

2006-02-08 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Correction: no content selected when the Direct Mail was based on external URL.
	* Correction: createMailFrom variable confusion in class.mod_web_dmail.php

2006-02-07 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Delete clear.gif and remove references in class.mod_web_dmail.php
	* Update to manual
	* Add userTable field in Module configuration function

2006-02-07  Thorsten Kahler  <thorsten.kahler@dkd.de>
	* Wrap direct_mail boundaries in plaintextLib.inc using TS and the userFunc from container class

2006-02-06 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Delete file TODO.txt in folder doc.
	* Small update to the manual.
	* Add localization labels for import CSV list.
	* Add description to csv import (see bugtracker issue 2063).

2006-02-05 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Updates to manual.
	* Add enable_jump_url parameter in Page TSConfig module configuration settings.
	* Move t3lib_TStemplate instantiation to module initialization.

2006-02-03 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Debug dmailer boundaries.
	* Debug retrieval of recipient categories.
	* dmailer cron initialization was missing load of ext_tables.

2006-02-02  Thorsten Kahler  <thorsten.kahler@dkd.de>
	* Check page permissions before writing page TS configuration
	* Don't override permissions of BE user in mod_web_dmail

2006-02-03 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Initial draft of categories conversion.

2006-02-02 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Small update to manual.
	* Add getRecursiveSelect function in class mod_web_dmail.

2006-02-02  Thorsten Kahler  <thorsten.kahler@dkd.de>
	* Include TS setup (for dmailer boundaries) optionally

2006-02-01  Thorsten Kahler  <thorsten.kahler@dkd.de>
	* Corrected misspelled and not initialized variables

2006-02-01 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Correction to emails sent by cron task to admin.
	* Add file locking to dmailer cron script so that the dmailer cron never runs twice (bugtracker issue 2461).
	* Correct query for the fe_users case in makeStaticListQuery.
	* Comment out call to undefined getRecursiveSelect in funtion cmd_compileMailGroup
	* Remove records without email address from distribution lists.
	
2006-01-31 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Add deleted column to sys_dmail table (bugtracker issue 2190).
	* Remove message-id setting from dmailer class. Use updated version of core t3lib_htmlmail.
	* Add email column to sys_dmail_maillog (bugtracker issue 2191).

2006-01-30 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Adjust default value of proposed messageid.

2006-01-29 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* ext_tables.php: add module_sys_dmail_category and module_sys_dmail_html to all types in fe_users TCA
	* Add option to use sendmail deferred delivery mode.
	* Remove from class.dmailer.php redundant functions now corrected in TYPO3 4.0 core.
	* Try to auto-detect charset when page is external.
	* Fix issue 611 (add real name in To: field of emails).

2006-01-28 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Fix problem when sending the final mail to a simple list.
	* Add dmail boundaries wrapper class and typoscript (on behalf of Thorsten Kahler).
	* Use $TYPO3_DB->fullQuoteStr in makeStaticListQuery.

2006-01-25 Jan-Erik Revsbech <jer@moccmpany.com>
	* fixed som e serious bugs concerning the migration from categories is TSconfig to the db table sys_dmail_categories. Now single content elements can be modified so its only displayed if the user is subscribing to the specifed category. Requires a pending patch in tslib/class.tslib_content.php
	* fixed problem with editing subscription profile for tt_address and fe_users records.
	
2006-01-25 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Add field use_rdct to table sys_dmail.
	* Localize some elements of module configuration.

2006-01-24 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Delete contents of directories mod2 and mod3.
	* Set PHP_version to 4.1.0- in ext_emconf.php.
	* Add partial draft of manual.
	* Remove function sendTheMail from class.dmailer.php.
	* Remove funcions getURL, getExtendedURL, ux_translate_uri, substHTTPurlsInPlainText, substHREFsInHTML, substMediaNamesInHTML, constructHTML from class.dmailer.php.
	* Extension now dependent on TYPO3 4.0 (t3lib_htmlmail).
	* Delete file dmailerd.phpsh, update manual accordingly.
	* Correct linebreaks in dmailerd.phpcron.
	* Fix reference to mysql_fetch_assoc in class.web_mod_dmail.php
	* Revert incorrect change to ext_tables.sql (mid must have backticks on KEY statements).
	* Correction to web_mod_dmail JS: replace document.location with window.location.href

2006-01-23 Stanislas Rolland <stanislas.rolland(arobas)fructifor.ca>
	* Add charset column to sys_dmail table
	* Change default encoding to quoted-printable in TCA
	* Add configuration variables (ext_conf_template.txt and ext_localconf.php)
	* Remove lock to Global (ext_emconf.php)
	* Update to returnmail.phpsh (from sr_direct_mail_ext)
	* Add mod3 directory
	* Add returnmail.phpsh and class.readmail.php to mod3 directory.
	* Update locallang.php file in mod directory (from sr_direct_mail_ext).
	* Update to dmailer.phpcron and class.dmailer.php in mod directory (from sr_direct_mail_ext)
	* Add mod2 directory.
	* Add dmailer.phpsh and class.dmailer.php to mod2 directory.
	* Add files locallang_mod.php and clear.gif in directory mod.
	* Update index.php and conf.php in directory mod.
	* Multiple changes to class.mod_web_dmail.php (from sr_direct_mail_ext).
	* Merge mod2 and mod3 directories into mod directory
	* Get direct mail character set from TS template when based on internal page.

2005-07-7   Jan-Erik Revsbech <jer@moccompany.com>
	* Fixed problem with not setting encoding Bug #1264
	* Removed all trailing whitespaces from mod/class.mod_wed_dmail.php
	
2005-05-18  Thorsten Kahler  <thorsten.kahler@dkd.de>

	* Added a ChangeLog file too keep track of changes
	* Added CVS Revision Tags
	* Added PHPDoc Tags "package" and "subpackage"

